// Generated by purs version 0.14.2
"use strict";
var Control_Alt = require("../Control.Alt/index.js");
var Control_Applicative = require("../Control.Applicative/index.js");
var Control_Bind = require("../Control.Bind/index.js");
var Control_Plus = require("../Control.Plus/index.js");
var Data_Either = require("../Data.Either/index.js");
var Data_Functor_Variant = require("../Data.Functor.Variant/index.js");
var Data_Symbol = require("../Data.Symbol/index.js");
var Run = require("../Run/index.js");
var Run_Internal = require("../Run.Internal/index.js");
var Type_Equality = require("../Type.Equality/index.js");
var runChoose = function (dictAlternative) {
    var handle = Data_Functor_Variant.on()(new Data_Symbol.IsSymbol(function () {
        return "choose";
    }))(Run_Internal["_choose"])(Data_Either.Left.create)(Data_Either.Right.create);
    var loop = function (r) {
        var v = Run.peel(r);
        if (v instanceof Data_Either.Left) {
            var v1 = handle(v.value0);
            if (v1 instanceof Data_Either.Left) {
                if (v1.value0 instanceof Run_Internal.Empty) {
                    return Control_Applicative.pure(Run.applicativeRun)(Control_Plus.empty(dictAlternative.Plus1()));
                };
                if (v1.value0 instanceof Run_Internal.Alt) {
                    return Control_Bind.bind(Run.bindRun)(loop(v1.value0.value0(true)))(function (x) {
                        return Control_Bind.bind(Run.bindRun)(loop(v1.value0.value0(false)))(function (y) {
                            return Control_Applicative.pure(Run.applicativeRun)(Control_Alt.alt((dictAlternative.Plus1()).Alt0())(x)(y));
                        });
                    });
                };
                throw new Error("Failed pattern match at Run.Choose (line 33, column 18 - line 38, column 25): " + [ v1.value0.constructor.name ]);
            };
            if (v1 instanceof Data_Either.Right) {
                return Control_Bind.bind(Run.bindRun)(Run.send(v1.value0))(loop);
            };
            throw new Error("Failed pattern match at Run.Choose (line 32, column 15 - line 40, column 29): " + [ v1.constructor.name ]);
        };
        if (v instanceof Data_Either.Right) {
            return Control_Applicative.pure(Run.applicativeRun)(Control_Applicative.pure(dictAlternative.Applicative0())(v.value0));
        };
        throw new Error("Failed pattern match at Run.Choose (line 31, column 12 - line 42, column 22): " + [ v.constructor.name ]);
    };
    return loop;
};
var liftChoose = Run.lift()(new Data_Symbol.IsSymbol(function () {
    return "choose";
}))(Run_Internal.functorChoose)(Run_Internal["_choose"]);
var cempty = Control_Plus.empty(Run.runPlus(Type_Equality.refl));
var calt = Control_Alt.alt(Run.runAlt(Type_Equality.refl));
module.exports = {
    liftChoose: liftChoose,
    cempty: cempty,
    calt: calt,
    runChoose: runChoose,
    Alt: Run_Internal.Alt,
    Empty: Run_Internal.Empty,
    "_choose": Run_Internal["_choose"]
};
